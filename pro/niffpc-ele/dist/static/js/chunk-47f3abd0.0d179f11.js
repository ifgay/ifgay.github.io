(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47f3abd0"],{"110b":function(e,t,n){},"1fe1":function(e,t,n){"use strict";n.r(t);var i,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.getCommentList,expression:"getCommentList"}],attrs:{"infinite-scroll-disabled":"disabled"}},[i("el-row",[i("el-col",{attrs:{span:20,offset:2}},[i("el-card",{attrs:{shadow:"always"}},[i("div",{staticClass:"flex_between"},[i("div",{staticClass:"flex_center"},[i("img",{staticStyle:{"margin-right":"20px"},attrs:{src:"./icon/app-ico/"+e.feAppInfo.fe_ico+".svg"}}),i("div",[i("h3",{staticStyle:{display:"inline"}},[e._v(e._s(e.feAppInfo.fe_name))]),i("br"),e._v(" "+e._s(e.feAppInfo.fe_desc)+" "),i("br"),i("small",{staticStyle:{color:"var(--gray)"}},[e._v(e._s(e.feAppInfo.fe_tim)+"次下载"),i("el-rate",{attrs:{value:parseInt(e.feAppInfo.fe_rate),disabled:"","show-score":"","allow-half":"","text-color":"#ff9900","score-template":"{value}分"}})],1)])]),i("el-button",{attrs:{type:"success",size:"small",round:""}},[e._v("下载")])],1)])],1)],1),i("br"),i("br"),i("div",{staticClass:"detai_tab flex_center"},[i("h2",{style:{"border-bottom":0==e.tabActive?"5px var(--main) solid":"5px transparent solid"},on:{mouseover:function(t){e.tabActive=0}}},[e._v(" 详情 ")]),i("el-badge",{attrs:{value:e.feAppInfo.comment_count,max:99}},[i("h2",{style:{"border-bottom":1==e.tabActive?"5px var(--main) solid":"5px transparent solid"},on:{mouseover:function(t){e.tabActive=1}}},[e._v(" 评论 ")])])],1),i("br"),0==e.tabActive?i("div",{staticClass:"box_deta",domProps:{innerHTML:e._s(e.feAppInfo.fe_readme)}}):e._e(),1==e.tabActive?i("div",{staticClass:"box_deta"},[i("el-form",{ref:"formByComment",attrs:{model:e.formData,rules:e.rulesComment,"label-width":"100px"}},[i("h3",{staticClass:"flex_start"},[e._v(" 我的评分:"),i("el-rate",{model:{value:e.formData.feRate,callback:function(t){e.$set(e.formData,"feRate",t)},expression:"formData.feRate"}})],1),i("br"),i("el-form-item",{attrs:{prop:"feCommentContent"}},[i("el-input",{attrs:{type:"textarea",placeholder:"留下你的评论..."},model:{value:e.formData.feCommentContent,callback:function(t){e.$set(e.formData,"feCommentContent",t)},expression:"formData.feCommentContent"}})],1),i("span",{staticClass:"ch_bt_submi",staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"default",size:"small",round:""},nativeOn:{click:function(t){return e.subMitComment.apply(null,arguments)}}},[e._v("发表评价")])],1)],1),i("br"),i("br"),e._l(e.feComment,(function(t,a){return i("div",{key:a},[i("div",{staticClass:"comment_item flex_between"},[i("div",{staticClass:"comment_info"},[i("div",{staticClass:"flex_start"},[i("img",{staticClass:"df_img",attrs:{src:"./icon/hd/"+t.user_hd+".svg"}}),i("small",[e._v(e._s(t.nikname))]),e._v("  "),i("small",[e._v(e._s(t.comment_time))])]),i("span",{staticStyle:{"font-size":"13px"}},[e._v(" "+e._s(t.comment_content)+" ")])]),i("div",{staticClass:"right_col_comm"},[i("el-rate",{attrs:{value:parseInt(t.comment_rate),"allow-half":"",disabled:"","text-color":"#ff9900"}}),i("span",{staticClass:"col_l"},[i("p",{staticClass:"flex_center",on:{click:function(n){return e.niceAddPush(t.id)}}},[e.activeNiceCommentId!=t.id?i("img",{attrs:{src:n("4a35")}}):e._e(),e.activeNiceCommentId==t.id?i("img",{attrs:{src:n("37fb")}}):e._e(),i("span",[e._v(e._s(t.comment_nice))])]),i("p",{staticClass:"flex_center",on:{click:function(n){return e.replyEditOpen(t.id,t.nikname)}}},[i("img",{attrs:{src:n("cf89")}}),i("span",[e._v("回复")])])])],1)]),e._l(t.children,(function(a,s){return i("div",{key:s,staticClass:"comment_item flex_between comment_child",staticStyle:{width:"calc(100% - 44px)","margin-left":"44px",opacity:"1"}},[i("div",{staticClass:"comment_info"},[i("div",{staticClass:"flex_start"},[i("img",{staticClass:"df_img",attrs:{src:"./icon/hd/"+a.user_hd+".svg"}}),i("small",[e._v(e._s(a.nikname)+e._s(a.is_reply?"回复"+a.face_user_name:""))]),e._v("  "),i("small",[e._v(e._s(a.comment_time))])]),i("span",{staticStyle:{"font-size":"13px"}},[e._v(" "+e._s(a.comment_content)+" ")])]),i("div",{staticClass:"right_col_comm"},[i("el-rate",{staticStyle:{color:"#fff"},attrs:{value:parseInt(a.comment_rate),disabled:"","allow-half":"","text-color":"#ff9900"}}),i("span",{staticClass:"col_l"},[i("p",{staticClass:"flex_center",on:{click:function(t){return e.niceAddPush(a.id)}}},[e.activeNiceCommentId!=a.id?i("img",{attrs:{src:n("4a35")}}):e._e(),e.activeNiceCommentId==a.id?i("img",{attrs:{src:n("37fb")}}):e._e(),i("span",[e._v(e._s(a.comment_nice))])]),i("p",{staticClass:"flex_center",on:{click:function(n){return e.replyEditOpen(t.id,a.nikname)}}},[i("img",{attrs:{src:n("cf89")}}),i("span",[e._v("回复")])])])],1)])})),t.children.length%5==0&&0!=t.children.length?i("div",{staticClass:"comment_item flex_center comment_child",staticStyle:{"min-height":"20px"}},[i("small",{staticStyle:{color:"var(--main)"},on:{click:function(n){return e.loadMoreCommentPull(t.id,a)}}},[e.loadMoreCommentGrant?e._e():i("i",{staticClass:"el-icon-arrow-down"}),e.loadMoreCommentGrant?i("i",{staticClass:"el-icon-loading"}):e._e(),e._v(" 查看更多 ")])]):e._e(),t.children.length%5!=0&&t.children.length>5?i("div",{staticClass:"comment_item flex_center comment_child",staticStyle:{"min-height":"20px"}},[i("small",{staticStyle:{color:"var(--gray)"},on:{click:function(n){return e.loadMoreCommentPull(t.id,a)}}},[e._v(" 已加载全部 ")])]):e._e(),i("el-divider",{attrs:{"content-position":"right"}})],2)})),e.loading?i("p",{staticClass:"flex_center"},[i("i",{staticClass:"el-icon-loading"}),e._v("加载中.... ")]):e._e()],2):e._e(),i("el-dialog",{attrs:{visible:e.dialogReplyVisible,modal:!1,title:"回复给"+e.replyUserForm.faceToName,width:"50%"},on:{"update:visible":function(t){e.dialogReplyVisible=t}}},[i("el-form",{ref:"formByReply",attrs:{model:e.replyUserForm,rules:e.rulesReply}},[i("el-form-item",{attrs:{prop:"feCommentContent"}},[i("el-input",{attrs:{type:"textarea",placeholder:"这是回复内容"},model:{value:e.replyUserForm.feCommentContent,callback:function(t){e.$set(e.replyUserForm,"feCommentContent",t)},expression:"replyUserForm.feCommentContent"}})],1),i("span",{staticClass:"ch_bt_submi",staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"default",size:"small",round:""},nativeOn:{click:function(t){return e.subMitCommentReply.apply(null,arguments)}}},[e._v("回复")])],1),i("br")],1)],1)],1)},s=[],o=(n("d3b7"),n("159b"),n("99af"),{created:function(){i=this,this.getFeDetails()},methods:{getFeDetails:function(){this.axios.get(this.host+"vitor/fe_details_own?id=".concat(this.$route.params.id||1)).then((function(e){i.feAppInfo=e.data}))},niceAddPush:function(e){this.feComment.forEach((function(t,n){t.id==e&&i.feComment[n].comment_nice++,t.children.forEach((function(t,a){t.id==e&&i.feComment[n].children[a].comment_nice++}))})),this.activeNiceCommentId=e,this.axios.get(this.host+"index/inc_comment_nice?id=".concat(e))},loadMoreCommentPull:function(e,t){if(!this.loadMoreCommentGrant){this.loadMoreCommentGrant=!0;var n=Math.floor(this.feComment[t].children.length/5);this.axios.get(this.host+"vitor/get_comment_reply?page=".concat((0==n?1:n)+1,"&size=5&id=").concat(e)).then((function(e){i.loadMoreCommentGrant=!1,i.feComment[t].children=i.feComment[t].children.concat(e.data)}))}},parseInt:function(e){return window.parseInt(e)},getCommentList:function(){this.disabled=!0,this.axios.get(this.host+"vitor/get_comment_list?id=".concat(i.feId,"&page=").concat(this.page,"&size=7")).then((function(e){i.disabled=!1,e.data.length<7&&(i.disabled=!0),i.page++,i.feComment=i.feComment.concat(e.data),i.getFeDetails()}))},subMitCommentReply:function(){var e=this,t={comment_parent_id:this.replyUserForm.parentId,comment_content:this.replyUserForm.feCommentContent,is_reply:1,face_user_name:this.replyUserForm.faceToName,fe_id:this.feId,comment_rate:2.5};this.$refs.formByReply.validate((function(n){n&&e.axios.post(e.host+"index/save_user_comment",t).then((function(e){i.$message({type:"success",message:"回复已发送!"}),i.feComment=[],i.page=1,i.getCommentList(1),i.dialogReplyVisible=!1}))}))},replyEditOpen:function(e,t){this.replyUserForm.faceToName=t,this.dialogReplyVisible=!0,this.replyUserForm.parentId=e},subMitComment:function(){var e=this,t={comment_parent_id:"",comment_content:this.formData.feCommentContent,is_reply:0,face_user_name:"",fe_id:this.feId,comment_rate:this.formData.feRate};this.$refs.formByComment.validate((function(n){n&&e.axios.post(e.host+"index/save_user_comment",t).then((function(e){i.$message({type:"success",message:"评论发表成功!"}),i.feComment=[],i.page=1,i.getCommentList(1)}))}))}},data:function(){return{replyUserForm:{feCommentContent:"",faceToName:"",parentId:""},dialogReplyVisible:!1,loadMoreCommentGrant:!1,loading:!1,page:1,disabled:!1,feId:this.$route.params.id||1,tabActive:0,activeNiceCommentId:-1,feAppInfo:{fe_name:"",fe_rate:0,fe_ico:1},formData:{feCommentContent:"",feRate:5},feComment:[],rulesReply:{feCommentContent:[{required:!0,message:"评论内容不能为空"},{min:3,max:125,message:"长度在 1 到 125 个字符"}]},rulesComment:{feCommentContent:[{required:!0,message:"评论内容不能为空"},{min:3,max:125,message:"长度在 1 到 125 个字符"}]}}}}),l=o,c=(n("c391"),n("2877")),m=Object(c["a"])(l,a,s,!1,null,null,null);t["default"]=m.exports},"37fb":function(e,t,n){e.exports=n.p+"static/img/nice-a.d562b5b2.svg"},"4a35":function(e,t,n){e.exports=n.p+"static/img/nice.f2ba4d2b.svg"},c391:function(e,t,n){"use strict";n("110b")},cf89:function(e,t,n){e.exports=n.p+"static/img/comment.a6bb830e.svg"}}]);
//# sourceMappingURL=chunk-47f3abd0.0d179f11.js.map