(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ecd4b0f"],{"107c":function(t,e,n){var i=n("d039"),a=n("da84"),s=a.RegExp;t.exports=i((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1276:function(t,e,n){"use strict";var i=n("2ba4"),a=n("c65b"),s=n("e330"),r=n("d784"),c=n("44e7"),l=n("825a"),o=n("1d80"),u=n("4840"),d=n("8aa5"),f=n("50c4"),g=n("577e"),p=n("dc4a"),h=n("4dae"),v=n("14c3"),x=n("9263"),_=n("9f7f"),m=n("d039"),y=_.UNSUPPORTED_Y,w=4294967295,b=Math.min,C=[].push,k=s(/./.exec),R=s(C),S=s("".slice),U=!m((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=g(o(this)),r=void 0===n?w:n>>>0;if(0===r)return[];if(void 0===t)return[s];if(!c(t))return a(e,s,t,r);var l,u,d,f=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,_=new RegExp(t.source,p+"g");while(l=a(x,_,s)){if(u=_.lastIndex,u>v&&(R(f,S(s,v,l.index)),l.length>1&&l.index<s.length&&i(C,f,h(l,1)),d=l[0].length,v=u,f.length>=r))break;_.lastIndex===l.index&&_.lastIndex++}return v===s.length?!d&&k(_,"")||R(f,""):R(f,S(s,v)),f.length>r?h(f,0,r):f}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:a(e,this,t,n)}:e,[function(e,n){var i=o(this),r=void 0==e?void 0:p(e,t);return r?a(r,e,i,n):a(s,g(i),e,n)},function(t,i){var a=l(this),r=g(t),c=n(s,a,r,i,s!==e);if(c.done)return c.value;var o=u(a,RegExp),p=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(y?"g":"y"),x=new o(y?"^(?:"+a.source+")":a,h),_=void 0===i?w:i>>>0;if(0===_)return[];if(0===r.length)return null===v(x,r)?[r]:[];var m=0,C=0,k=[];while(C<r.length){x.lastIndex=y?0:C;var U,E=v(x,y?S(r,C):r);if(null===E||(U=b(f(x.lastIndex+(y?C:0)),r.length))===m)C=d(r,C,p);else{if(R(k,S(r,m,C)),k.length===_)return k;for(var I=1;I<=E.length-1;I++)if(R(k,E[I]),k.length===_)return k;C=m=U}}return R(k,S(r,m)),k}]}),!U,y)},"14c3":function(t,e,n){var i=n("da84"),a=n("c65b"),s=n("825a"),r=n("1626"),c=n("c6b6"),l=n("9263"),o=i.TypeError;t.exports=function(t,e){var n=t.exec;if(r(n)){var i=a(n,t,e);return null!==i&&s(i),i}if("RegExp"===c(t))return a(l,t,e);throw o("RegExp#exec called on incompatible receiver")}},"44e7":function(t,e,n){var i=n("861d"),a=n("c6b6"),s=n("b622"),r=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},"46c7":function(t,e,n){t.exports=n.p+"static/img/file.f9cadb3b.svg"},"498a":function(t,e,n){"use strict";var i=n("23e7"),a=n("58a8").trim,s=n("c8d2");i({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},"4dae":function(t,e,n){var i=n("da84"),a=n("23cb"),s=n("07fa"),r=n("8418"),c=i.Array,l=Math.max;t.exports=function(t,e,n){for(var i=s(t),o=a(e,i),u=a(void 0===n?i:n,i),d=c(l(u-o,0)),f=0;o<u;o++,f++)r(d,f,t[o]);return d.length=f,d}},"4e94":function(t,e,n){"use strict";n("cbcd")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var i=n("e330"),a=n("1d80"),s=n("577e"),r=n("5899"),c=i("".replace),l="["+r+"]",o=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(t){return function(e){var n=s(a(e));return 1&t&&(n=c(n,o,"")),2&t&&(n=c(n,u,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},"74e6":function(t,e,n){t.exports=n.p+"static/img/unknown-file.619b1277.svg"},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9263:function(t,e,n){"use strict";var i=n("c65b"),a=n("e330"),s=n("577e"),r=n("ad6d"),c=n("9f7f"),l=n("5692"),o=n("7c73"),u=n("69f3").get,d=n("fce3"),f=n("107c"),g=l("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,h=p,v=a("".charAt),x=a("".indexOf),_=a("".replace),m=a("".slice),y=function(){var t=/a/,e=/b*/g;return i(p,t,"a"),i(p,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),w=c.BROKEN_CARET,b=void 0!==/()??/.exec("")[1],C=y||b||w||d||f;C&&(h=function(t){var e,n,a,c,l,d,f,C=this,k=u(C),R=s(t),S=k.raw;if(S)return S.lastIndex=C.lastIndex,e=i(h,S,R),C.lastIndex=S.lastIndex,e;var U=k.groups,E=w&&C.sticky,I=i(r,C),$=C.source,F=0,N=R;if(E&&(I=_(I,"y",""),-1===x(I,"g")&&(I+="g"),N=m(R,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==v(R,C.lastIndex-1))&&($="(?: "+$+")",N=" "+N,F++),n=new RegExp("^(?:"+$+")",I)),b&&(n=new RegExp("^"+$+"$(?!\\s)",I)),y&&(a=C.lastIndex),c=i(p,E?n:C,N),E?c?(c.input=m(c.input,F),c[0]=m(c[0],F),c.index=C.lastIndex,C.lastIndex+=c[0].length):C.lastIndex=0:y&&c&&(C.lastIndex=C.global?c.index+c[0].length:a),b&&c&&c.length>1&&i(g,c[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(c[l]=void 0)})),c&&U)for(c.groups=d=o(null),l=0;l<U.length;l++)f=U[l],d[f[0]]=c[f[1]];return c}),t.exports=h},"9f7f":function(t,e,n){var i=n("d039"),a=n("da84"),s=a.RegExp,r=i((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),c=r||i((function(){return!s("a","y").sticky})),l=r||i((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:l,MISSED_STICKY:c,UNSUPPORTED_Y:r}},a880:function(t,e,n){t.exports=n.p+"static/img/img-file.484d226c.svg"},ac1f:function(t,e,n){"use strict";var i=n("23e7"),a=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b666:function(t,e,n){t.exports=n.p+"static/img/upload-file.97dba080.svg"},c8d2:function(t,e,n){var i=n("5e77").PROPER,a=n("d039"),s=n("5899"),r="​᠎";t.exports=function(t){return a((function(){return!!s[t]()||r[t]()!==r||i&&s[t].name!==t}))}},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,s=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cbcd:function(t,e,n){},d784:function(t,e,n){"use strict";n("ac1f");var i=n("e330"),a=n("6eeb"),s=n("9263"),r=n("d039"),c=n("b622"),l=n("9112"),o=c("species"),u=RegExp.prototype;t.exports=function(t,e,n,d){var f=c(t),g=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=g&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[o]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!g||!p||n){var h=i(/./[f]),v=e(f,""[t],(function(t,e,n,a,r){var c=i(t),l=e.exec;return l===s||l===u.exec?g&&!r?{done:!0,value:h(e,n,a)}:{done:!0,value:c(n,e,a)}:{done:!1}}));a(String.prototype,t,v[0]),a(u,f,v[1])}d&&l(u[f],"sham",!0)}},e9c4:function(t,e,n){var i=n("23e7"),a=n("da84"),s=n("d066"),r=n("2ba4"),c=n("e330"),l=n("d039"),o=a.Array,u=s("JSON","stringify"),d=c(/./.exec),f=c("".charAt),g=c("".charCodeAt),p=c("".replace),h=c(1..toString),v=/[\uD800-\uDFFF]/g,x=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,m=function(t,e,n){var i=f(n,e-1),a=f(n,e+1);return d(x,t)&&!d(_,a)||d(_,t)&&!d(x,i)?"\\u"+h(g(t,0),16):t},y=l((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&i({target:"JSON",stat:!0,forced:y},{stringify:function(t,e,n){for(var i=0,a=arguments.length,s=o(a);i<a;i++)s[i]=arguments[i];var c=r(u,null,s);return"string"==typeof c?p(c,v,m):c}})},ee79:function(t,e,n){"use strict";n.r(e);var i,a,s,r,c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%",width:"100%",overflow:"hidden"}},[t.loading?i("div",{staticClass:"flex_center",staticStyle:{"min-height":"20px",width:"100%"}},[t._m(0)]):t._e(),i("div",{ref:"que",staticClass:"chat_que",on:{scroll:t.queScrollHander}},[t._l(t.chatRows,(function(e,n){return i("span",{key:n},[e.user_id!=t.$store.state.userInfo.id?i("div",{staticClass:"bef"},[i("img",{staticClass:"hd_img",attrs:{src:"./icon/hd/"+e.user_hd+".svg"},on:{click:function(n){return t.atFriends(e.nikname)}}}),i("div",{staticClass:"nak flex_start",staticStyle:{"flex-wrap":"wrap"}},[i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{color:"var(--blue)"}},[t._v(t._s(e.nikname))]),t._v("   "),i("small",{staticStyle:{color:"var(--gray)"}},[t._v(t._s(e.chat_time))])]),i("div",{staticClass:"speak"},[i("span",{staticClass:"mes_text_yo"},[t._v(" "+t._s(e.chat_text)+" ")]),t._l(JSON.parse(e.chat_img_arr),(function(e,n){return i("p",{key:n},[i("img",{staticClass:"mes_keep_img",attrs:{src:t.hostAddr+"/static/uploads/"+e,preview:"1","preview-text":e}})])})),t._l(JSON.parse(e.chat_file_arr),(function(e,n){return i("p",{key:n,staticStyle:{"text-align":"left"}},[i("i",{staticClass:"el-icon-document"}),t._v(" 附件"+t._s(n+1)+": "+t._s(e.slice(0,7)+e.slice(e.length-4))+" "),i("small",{staticStyle:{color:"var(--main)"}},[t._v("下载")])])}))],2)])]):t._e(),e.user_id==t.$store.state.userInfo.id?i("div",{staticClass:"aft"},[i("div",{staticClass:"nak flex_end",staticStyle:{"flex-wrap":"wrap"}},[i("div",{staticClass:"flex_end",staticStyle:{width:"100%","align-items":"flex-end"}},[i("small",{staticStyle:{color:"var(--gray)"}},[t._v(t._s(e.chat_time))]),t._v("   "),i("span",{staticStyle:{color:"var(--green)"}},[t._v(t._s(e.nikname))])]),i("div",{staticClass:"speak"},[i("span",{staticClass:"mes_text_yo"},[t._v(" "+t._s(e.chat_text)+" ")]),t._l(JSON.parse(e.chat_img_arr),(function(e,n){return i("p",{key:n},[i("img",{staticClass:"mes_keep_img",attrs:{src:t.hostAddr+"/static/uploads/"+e,preview:"1","preview-text":e}})])})),t._l(JSON.parse(e.chat_file_arr),(function(e,n){return i("p",{key:n,staticStyle:{"text-align":"right"}},[i("i",{staticClass:"el-icon-document"}),t._v(" 附件"+t._s(n+1)+": "+t._s(e.slice(0,7)+e.slice(e.length-4))+" "),i("small",{staticStyle:{color:"var(--main)"}},[t._v("下载")])])}))],2)]),i("img",{staticClass:"hd_img",attrs:{src:"./icon/hd/"+e.user_hd+".svg"}})]):t._e()])})),i("br"),i("br")],2),i("div",{staticClass:"chat_bam"},[t.fileUploadQuu.length>0||t.imgUploadWind.length>0||t.fileUploadingCount>0?i("small",{staticClass:"tips_inside"},[t._v(" "+t._s(t.fileUploadQuu.length)+"个附件,"+t._s(t.imgUploadWind.length)+"张图片,"+t._s(t.fileUploadingCount)+"正在上传 "),i("span",{on:{click:t.cancelUpload}},[i("i",{staticClass:"el-icon-close"}),t._v("取消上传")])]):t._e(),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{placeholder:"说点什么吧..."},domProps:{value:t.message},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveMessageDis.apply(null,arguments)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),i("button",{on:{click:t.saveMessageDis}},[t._v("发送")]),i("div",{staticClass:"moon flex_between"},[i("el-popover",{attrs:{placement:"top-start",width:70*(t.fileUploadQuu.length+1),trigger:"click"}},[i("div",{staticClass:"flex_center",style:{width:70*(t.fileUploadQuu.length+1)+20+"px"}},[t._l(t.fileUploadQuu,(function(e,a){return i("div",{key:a,staticClass:"flex_center img_cloud",attrs:{title:e}},[i("img",{attrs:{src:n("74e6")}}),i("p",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e)+" ")])])})),i("div",{staticClass:"flex_center img_cloud",on:{click:function(e){return t.$refs.eleFileNever.click()}}},[i("img",{attrs:{src:n("b666")}}),i("p",{staticStyle:{"text-align":"center"}},[t._v("点击上传")])])],2),i("div",{attrs:{slot:"reference"},slot:"reference"},[i("img",{attrs:{src:n("46c7")}})])]),i("el-popover",{attrs:{placement:"top-start",width:70*(t.imgUploadWind.length+1),trigger:"click"}},[i("div",{staticClass:"flex_center",style:{width:70*(t.imgUploadWind.length+1)+20+"px"}},[t._l(t.imgUploadWind,(function(e,n){return i("div",{key:n,staticClass:"flex_center img_cloud",attrs:{title:e}},[i("img",{staticStyle:{width:"64px",height:"64px"},attrs:{src:t.hostAddr+"/static/uploads/"+e}}),i("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(e))])])})),i("div",{staticClass:"flex_center img_cloud",on:{click:function(e){return t.$refs.eleFileNever.click()}}},[i("img",{attrs:{src:n("b666")}}),i("p",{staticStyle:{"text-align":"center"}},[t._v("点击上传")])])],2),i("div",{attrs:{slot:"reference"},slot:"reference"},[i("img",{attrs:{src:n("a880")}})])])],1)]),i("input",{ref:"eleFileNever",attrs:{type:"file",hidden:""},on:{change:t.saveFileFall}})])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{staticStyle:{color:"var(--main)"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" 加载消息中... ")])}],o=(n("ac1f"),n("1276"),n("caad"),n("99af"),n("498a"),n("e9c4"),["png","svg","jpg","jpeg"]),u={setup:function(){},updated:function(){},beforeDestroy:function(){clearInterval(r)},mounted:function(){var t=this;r=setInterval((function(){t.getChatRows(i.chatRows[i.chatRows.length-1].chat_id,1)}),6e3)},data:function(){return{message:"",chatRows:[],loading:!1,imgUploadWind:[],fileUploadQuu:[],fileUploadingCount:0}},created:function(){i=this,this.loading=!0,this.axios.get(this.host+"index/get_chat_init").then((function(t){t.success&&(i.chatRows=t.data,i.loading=!1,i.$nextTick((function(){i.$refs.que.scrollTop=i.$refs.que.scrollHeight})))}))},methods:{cancelUpload:function(){this.imgUploadWind=[],this.fileUploadQuu=[]},saveFileFall:function(){var t=this.$refs.eleFileNever.files[0],e=new FormData;e.append("file",t),this.fileUploadingCount++,this.axios.post(this.host+"index/save_file_fall",e).then((function(t){if(t.success){i.fileUploadingCount--;var e=t.data.split(".")[1];o.includes(e)?i.imgUploadWind.push(t.data):i.fileUploadQuu.push(t.data)}}))},queScrollHander:function(t){if(0==this.$refs.que.scrollTop){if(a)return!1;a=!0,this.getChatRows(this.chatRows[0].chat_id,0,!0)}},getChatRows:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&(this.loading=!0),s=!0,this.axios.get(this.host+"index/get_chat_rows?is_after=".concat(e,"&id=").concat(t)).then((function(t){if(i.loading=!1,t.success){if(a=!1,s=!1,0==t.data.length)return;e?(i.chatRows=i.chatRows.concat(t.data),i.$nextTick((function(){i.$refs.que.scrollTop=i.$refs.que.scrollHeight}))):(i.chatRows=t.data.concat(i.chatRows),i.$refs.que.scrollTop=400)}}))},atFriends:function(t){this.message+=" @".concat(t," ")},saveMessageDis:function(){if(0==this.message.trim().length)return!1;this.axios.post(this.host+"index/save_mes_dis",{message:this.message,chat_file_arr:JSON.stringify(this.fileUploadQuu),chat_img_arr:JSON.stringify(this.imgUploadWind)}).then((function(t){t.success&&(i.message="",i.imgUploadWind=[],i.fileUploadQuu=[],i.fileUploadingCount=0,s||i.getChatRows(i.chatRows[i.chatRows.length-1].chat_id,1))}))}}},d=u,f=(n("4e94"),n("2877")),g=Object(f["a"])(d,c,l,!1,null,null,null);e["default"]=g.exports},fce3:function(t,e,n){var i=n("d039"),a=n("da84"),s=a.RegExp;t.exports=i((function(){var t=s(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-5ecd4b0f.2091c503.js.map